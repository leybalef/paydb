# [Домой](./README.MD)

### Описание схемы `public`
Схема для хранения публичных данных и стандартных операций.

## Таблицы

### `t_24alltime`
| Название поля | Тип данных       | Описание поля          |
|---------------|------------------|------------------------|
| id            | serial           | Первичный ключ, автоинкремент, ID записи |
| qtranz        | int              | Количество транзакций |
| description   | text             | Описание записи |
| created_at    | timestamp        | Дата и время создания записи |

### `t_breakesum`
| Название поля | Тип данных       | Описание поля          |
|---------------|------------------|------------------------|
| id            | serial           | Первичный ключ, автоинкремент, ID записи |
| idbreake      | int              | Идентификатор разбивки суммы |
| sum           | numeric          | Сумма |
| description   | text             | Описание записи |

### `t_ckassa`
| Название поля | Тип данных       | Описание поля          |
|---------------|------------------|------------------------|
| id            | serial           | Первичный ключ, автоинкремент, ID записи |
| qtranz        | int              | Количество транзакций |
| description   | text             | Описание записи |
| created_at    | timestamp        | Дата и время создания записи |

### `t_commparam`
| Название поля | Тип данных       | Описание поля          |
|---------------|------------------|------------------------|
| id            | serial           | Первичный ключ, автоинкремент, ID записи |
| idcommparam   | int              | Идентификатор параметра коммуникации |
| param_value   | text             | Значение параметра |
| description   | text             | Описание параметра |

### `t_commun`
| Название поля | Тип данных       | Описание поля          |
|---------------|------------------|------------------------|
| id            | serial           | Первичный ключ, автоинкремент, ID записи |
| idcommun      | int              | Идентификатор коммуникации |
| value         | text             | Значение |
| description   | text             | Описание записи |

### `t_department`
| Название поля | Тип данных       | Описание поля          |
|---------------|------------------|------------------------|
| id            | serial           | Первичный ключ, автоинкремент, ID записи |
| name          | varchar(255)     | Имя отдела |
| description   | text             | Описание отдела |

## Последовательности

### `t_24alltime_qtranz_seq`
- **Описание**: Последовательность для автоинкрементного поля `qtranz` в таблице `t_24alltime`.
- **Тип**: **serial**; Диапазон: **1 - 2147483647**; База: **1**

### `t_breakesum_idbreake_seq`
- **Описание**: Последовательность для автоинкрементного поля `idbreake` в таблице `t_breakesum`.
- **Тип**: **serial**; Диапазон: **1 - 2147483647**; База: **1**

### `t_ckassa_qtranz_seq`
- **Описание**: Последовательность для автоинкрементного поля `qtranz` в таблице `t_ckassa`.
- **Тип**: **serial**; Диапазон: **1 - 2147483647**; База: **1**

### `t_commparam_idcommparam_seq`
- **Описание**: Последовательность для автоинкрементного поля `idcommparam` в таблице `t_commparam`.
- **Тип**: **serial**; Диапазон: **1 - 2147483647**; База: **1**

### `t_commun_idcommun_seq`
- **Описание**: Последовательность для автоинкрементного поля `idcommun` в таблице `t_commun`.
- **Тип**: **serial**; Диапазон: **1 - 2147483647**; База: **1**

### `t_department_id_seq`
- **Описание**: Последовательность для автоинкрементного поля `id` в таблице `t_department`.
- **Тип**: **serial**; Диапазон: **1 - 2147483647**; База: **1**

## Функции

**`calculate_breakesum(id int)`**
- Рассчитывает разбивку суммы на основе идентификатора и возвращает результат.

**`create_department(name varchar, description text)`**
- Создает новый отдел с заданным именем и описанием, возвращает ID нового отдела.

## Триггеры

**`after_create_department`**
- Применяется после создания нового отдела.
- Вызывает функцию `send_department_creation_notification` для отправки уведомления.