# [Домой](./README.MD)

### Описание схемы `sms`
Схема для управления и хранения SMS сообщений.

## Таблицы

### `info`
| Название поля | Тип данных | Описание поля          |
|----------------|------------|------------------------|
| id             | serial     | Первичный ключ, автоинкремент, ID сообщения |
| content        | text       | Текстовое содержание сообщения |
| created_at     | timestamp  | Дата и время создания сообщения |
| updated_at     | timestamp  | Дата и время последнего обновления сообщения |

### `syssms`
| Название поля | Тип данных | Описание поля          |
|----------------|------------|------------------------|
| id             | serial     | Первичный ключ, автоинкремент, ID системного сообщения |
| sys_name       | varchar(255)| Имя системного сообщения |
| description    | text       | Описание системного сообщения |

### `users`
| Название поля | Тип данных | Описание поля          |
|----------------|------------|------------------------|
| id             | serial     | Первичный ключ, автоинкремент, ID пользователя |
| username       | varchar(255)| Имя пользователя |
| phone_number   | varchar(20) | Номер телефона пользователя |

---
---
---
---
---

## Последовательности

`info_id_seq`
- **Описание**: Последовательность для автоинкрементного поля `id` в таблице `info`.
- **Тип**: **serial**; Диапазон: **1 - 2147483647**; База: **1**

`syssms_id_seq`
- **Описание**: Последовательность для автоинкрементного поля `id` в таблице `syssms`.
- **Тип**: **serial**; Диапазон: **1 - 2147483647**; База: **1**

`users_id_seq`
- **Описание**: Последовательность для автоинкрементного поля `id` в таблице `users`.
- **Тип**: **serial**; Диапазон: **1 - 2147483647**; База: **1**

---
---
---
---
---

## Функции

**`send_sms(content text, phone_number varchar)`**
- Отправляет SMS сообщение на указанный номер телефона с заданным содержанием и возвращает статус операции.

**`update_sms_status(id int, status text)`**
- Обновляет статус отправленного сообщения по его идентификатору и возвращает обновленный статус.

---
---
---
---
---

## Триггеры

**`after_sms_send`**
- Применяется после отправки SMS сообщения.
- Вызывает функцию `send_sms` для отправки уведомления.

---
---
---
---
---
